@import "../style/base";

$textfield-color-active: var(--textfield-color-active, #{color("primary")});
$textfield-color-invalid: var(--textfield-color-active, #{color("error")});

$textfield-border-color: var(--textfield-border-color, #{color("shade", 400)});
$textfield-border-color-hover: var(--textfield-border-color-hover, #{color("shade", 600)});
$textfield-transition: var(--textfield-transition, border-color #{$transition-duration-fast} #{$transition-ease-in});

$textfield-bg: var(--textfield-bg, #{$background});

$textfield-ruler-height: var(--textfield-line-height, #{size(2)});
$textfield-ruler-transition: var(--textfield-line-transition, transform #{$transition-duration-fast} #{$transition-deceleration-curve});
$textfield-font-size: var(--textfield-font-size, #{$font-size-m});

$textfield-padding-left-right: var(--textfield-padding-left-right, 0);
$textfield-padding-top-bottom: var(--textfield-padding-top-bottom, #{size(8)});

$textfield-padding-left-right-box: var(--textfield-padding-left-right-box, #{$spacing-m});
$textfield-border-radius-box: var(--textfield-border-radius-box, #{$border-radius-m});

$textfield-border-outlined: var(--textfield-border-outlined, #{$textfield-ruler-height});
$textfield-font-family: var(--textfield-font-family, #{$font-family-serif});

$textfield-placeholder-color: var(--textfield-placeholder-color, #{color("shade", 600)});
$textfield-placeholder-font-size: var(--textfield-placeholder-font-size, #{$font-size-s});
$textfield-placeholder-transition: var(--textfield-placeholder-transition, #{$transition-duration-fast} all #{$transition-linear});
$textfield-placeholder-space: var(--textfield-placeholder-space, #{size(16)});

:host {
	--_textfield-border-color: #{$textfield-border-color};
	--_textfield-state-color: #{$textfield-color-active};
	--_textfield-padding-left-right: #{$textfield-padding-left-right};

	transform: translateZ(0);
	display: block;
}

:host([disabled]) {
	pointer-events: none;
}

#container {
	font-size: #{$textfield-font-size};
	font-family: #{$textfield-font-family};
	background: #{$textfield-bg};
	border-bottom: #{$textfield-ruler-height} solid var(--_textfield-border-color);
	transition: #{$textfield-transition};
	position: relative;
}

#ruler {
	background: var(--_textfield-state-color);

	height: #{$textfield-ruler-height};
	transition: #{$textfield-ruler-transition};

	width: 100%;
	transform: scaleX(0);
	position: absolute;
	bottom: calc(#{$textfield-ruler-height}Â * -1);
}

#placeholder {
	left: var(--_textfield-padding-left-right);
	color: #{$textfield-placeholder-color};
	top: calc(#{$textfield-padding-top-bottom} + (#{$textfield-placeholder-space} / 2));
	transform: translateY(0);
	transition: #{$textfield-placeholder-transition};
	background: #{$textfield-bg};
	z-index: 1;
	position: absolute;
	pointer-events: none;
	font-size: inherit;
	line-height: 1;
	display: flex;
	align-items: center;
	white-space: nowrap;
}

:host(:hover) {
	--_textfield-border-color: #{$textfield-border-color-hover};
}

:host(:focus-within) {
	#ruler {
		transform: scaleX(1);
	}
}

:host([dirty]), :host(:focus-within) {
	#placeholder {
		font-size: #{$textfield-placeholder-font-size};
		transform: translateY(calc((#{$textfield-placeholder-space} / 2) * -1));
		//transform: translateY(-100%);
	}
}

:host([box]) {
	--_textfield-padding-left-right: #{$textfield-padding-left-right-box};

	#container {
		border: #{$textfield-ruler-height} solid var(--_textfield-border-color);
		border-radius: #{$textfield-border-radius-box};
	}

	#ruler {
		display: none;
	}
}

::slotted(#form-item) {
	@include reset();
	caret-color: var(--_textfield-color-sbtate);
	padding: #{$textfield-padding-top-bottom} var(--_textfield-padding-left-right);

	-webkit-overflow-scrolling: touch;
	position: relative;
	appearance: none;
	font-size: inherit;
	border: none;
	outline: none;
	margin: 0;
	background: transparent;
	width: 100%;

	// Remove ugly autofill
	&:-webkit-autofill {
		-webkit-box-shadow: inset 0 0 0px 9999px white;
	}
}

:host([placeholder]) {
	::slotted(#form-item) {
		padding-top: calc(#{$textfield-padding-top-bottom} + #{$textfield-placeholder-space});
	}
}

:host([invalid]) {
	--_textfield-state-color: #{$textfield-color-invalid};
	--_textfield-border-color: var(--_textfield-state-color);
}
