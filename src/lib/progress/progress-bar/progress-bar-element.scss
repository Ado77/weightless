@import "../../style/base";

$progress-bar-height: var(--progress-bar-height, #{size(4)});

$progress-bar-bg: var(--progress-bar-bg, #{color("shade", 300)});
$progress-bar-color: var(--progress-bar-color, #{color("primary", 500)});
$progress-bar-buffer-color: var(--progress-bar-buffer-color, #{color("primary", 500, 0.5)});

$progress-bar-determinate-transition: var(--progress-bar-determinate-transition, transform #{$transition-linear});

$progress-bar-indeterminate-duration: var(--progress-bar-indeterminate-duration, 2.1s);
$progress-bar-indeterminate-short-delay: var(--progress-bar-indeterminate-short-delay, 1.15s);
$progress-bar-indeterminate-duration: var(--progress-bar-indeterminate-duration, #{$progress-bar-indeterminate-duration});
$progress-bar-indeterminate-timing-function: var(--progress-bar-indeterminate-timing-function, #{$transition-standard-curve});
$progress-bar-indeterminate-timing-function: var(--progress-bar-indeterminate-timing-function, #{$transition-standard-curve});
$progress-bar-indeterminate-short-delay: var(--progress-bar-indeterminate-short-delay, #{$progress-bar-indeterminate-short-delay});


:host {
	height: #{$progress-bar-height};
	background: #{$progress-bar-bg};

	width: 100%;
	contain: strict;
	position: relative;
	display: block;
}

#progress {
	background: #{$progress-bar-color};
}

#buffer {
	background: #{$progress-bar-buffer-color};
}

:host([mode="indeterminate"]) {
	#progress {
		&:before, &:after {
			content: "";
			position: absolute;
			background-color: inherit;
			top: 0;
			left: 0;
			bottom: 0;
		}

		&:before {
			animation: indeterminate #{$progress-bar-indeterminate-duration} #{$progress-bar-indeterminate-timing-function} infinite;
		}
		&:after {
			animation: indeterminate-short #{$progress-bar-indeterminate-duration} #{$progress-bar-indeterminate-timing-function} infinite;
			animation-delay: #{$progress-bar-indeterminate-short-delay};
		}
	}
}

:host([mode="determinate"]) #progress, #buffer {
	transition: #{$progress-bar-determinate-transition};

	transform-origin: top left;
	position: absolute;
	top: 0;
	height: 100%;
	width: 100%;
}

@keyframes indeterminate {
	0% {
		left: -35%;
		right: 100%;
	}
	60% {
		left: 100%;
		right: -90%;
	}
	100% {
		left: 100%;
		right: -90%;
	}
}

@keyframes indeterminate-short {
	0% {
		left: -200%;
		right: 100%;
	}
	60% {
		left: 107%;
		right: -8%;
	}
	100% {
		left: 107%;
		right: -8%;
	}
}